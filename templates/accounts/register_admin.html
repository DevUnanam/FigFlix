{% extends 'base.html' %}

{% block title %}Admin Registration - FigFlix{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-16">
    <div class="bg-secondary rounded-lg shadow-xl p-8 border-2 border-primary">
        <div class="text-center mb-6">
            <div class="text-5xl mb-3">üëë</div>
            <h2 class="text-3xl font-bold mb-2">Admin Registration</h2>
            <p class="text-gray-400">Create an administrator account</p>
        </div>

        <form id="registerForm" class="space-y-6">
            {% csrf_token %}
            <input type="hidden" id="userRole" value="admin">

            <!-- Username -->
            <div>
                <label for="username" class="block text-sm font-medium mb-2">Username *</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white"
                    placeholder="Choose a username"
                >
            </div>

            <!-- Email -->
            <div>
                <label for="email" class="block text-sm font-medium mb-2">Email *</label>
                <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white"
                    placeholder="admin@email.com"
                >
            </div>

            <!-- Password -->
            <div>
                <label for="password" class="block text-sm font-medium mb-2">Password *</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white"
                    placeholder="Create a strong password"
                >
            </div>

            <!-- Confirm Password -->
            <div>
                <label for="password_confirm" class="block text-sm font-medium mb-2">Confirm Password *</label>
                <input
                    type="password"
                    id="password_confirm"
                    name="password_confirm"
                    required
                    class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white"
                    placeholder="Confirm password"
                >
            </div>

            <!-- Admin Notice -->
            <div class="bg-yellow-900/30 border border-yellow-600 rounded-lg p-4">
                <p class="text-sm text-yellow-200">
                    <strong>‚ö†Ô∏è Admin Access:</strong> You will be able to upload movies, manage content, and access the admin dashboard.
                </p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="hidden bg-red-600 text-white p-4 rounded-lg"></div>

            <!-- Success Message -->
            <div id="successMessage" class="hidden bg-green-600 text-white p-4 rounded-lg"></div>

            <!-- Submit Button -->
            <button
                type="submit"
                id="submitBtn"
                class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 rounded-lg transition duration-200"
            >
                Create Admin Account
            </button>
        </form>

        <!-- Links -->
        <div class="mt-6 text-center">
            <p class="text-gray-400">
                Already have an account?
                <a href="{% url 'login' %}" class="text-primary hover:underline">Sign in</a>
            </p>
            <p class="text-gray-400 mt-2">
                Want to register as user?
                <a href="{% url 'register_user' %}" class="text-primary hover:underline">User Registration</a>
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Debug: Check if API is loaded
    console.log('API module loaded:', typeof API !== 'undefined');
    console.log('Window API:', window.API);
</script>
<script src="/static/js/register.js"></script>
{% endblock %}
